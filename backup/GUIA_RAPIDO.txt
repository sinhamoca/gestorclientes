â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“¦ SISTEMA DE BACKUP AUTOMÃTICO - GUIA RÃPIDO           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ INSTALAÃ‡ÃƒO RÃPIDA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Copiar arquivos para o servidor:

   # No seu computador local, baixe os arquivos:
   - backup-manager.js
   - restore.sh
   - package.json
   - .env
   - install.sh
   - README.md

   # Enviar para o servidor:
   scp *.{js,sh,json,env,md} root@37.60.235.47:/root/

2. No servidor, executar instalador:

   cd /root
   chmod +x install.sh
   ./install.sh

   O instalador vai:
   âœ… Criar diretÃ³rio /root/backup-system
   âœ… Copiar todos os arquivos
   âœ… Instalar dependÃªncias
   âœ… Configurar permissÃµes
   âœ… Verificar PM2


ğŸ“‹ USO DIÃRIO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

BACKUP AUTOMÃTICO (PM2)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Iniciar sistema de backup
cd /root/backup-system
npm run pm2:start

# Ver logs
npm run pm2:logs

# Ver status
pm2 list

# Parar
npm run pm2:stop

# Reiniciar
npm run pm2:restart


RESTAURAR BACKUP (MANUAL)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Executar script de restauraÃ§Ã£o
cd /root/backup-system
./restore.sh

# O menu interativo vai mostrar:
  ğŸ“‹ Lista de backups (mais recente primeiro)
  ğŸ“… Data e hora de cada backup
  ğŸ’¾ Tamanho do arquivo
  
# VocÃª escolhe qual restaurar
# Sistema cria backup de seguranÃ§a antes
# Pede confirmaÃ§Ã£o (digite SIM)
# Restaura automaticamente


âš™ï¸ CONFIGURAÃ‡Ã•ES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Editar: /root/backup-system/.env

POSTGRES_CONTAINER=gestao_db          # Nome do container
DB_USER=gestao_user                   # UsuÃ¡rio do banco
DB_NAME=gestao_clientes               # Nome do banco
BACKUP_MAX_DAYS=7                     # Manter backups por 7 dias
BACKUP_INTERVAL_HOURS=12              # Backup a cada 12 horas


ğŸ“Š MONITORAMENTO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Ver logs de backup
tail -f /root/backup-system/logs/backup.log

# Ver logs de restauraÃ§Ã£o
tail -f /root/backup-system/logs/restore.log

# Listar backups criados
ls -lh /root/backup-system/backups/

# Ver espaÃ§o usado
du -sh /root/backup-system/backups/


ğŸ” TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Container nÃ£o encontrado:
  docker ps                    # Ver nome do container
  nano .env                    # Atualizar POSTGRES_CONTAINER

Backups nÃ£o sendo criados:
  pm2 logs backup-postgres     # Ver erros
  docker exec gestao_db pg_dump --version  # Testar acesso

PM2 nÃ£o inicia no boot:
  pm2 save                     # Salvar lista
  pm2 startup                  # Configurar autostart
  # Executar comando retornado


âœ¨ RECURSOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Backup automÃ¡tico a cada 12h
âœ… CompressÃ£o gzip (economia de espaÃ§o)
âœ… RetenÃ§Ã£o de 7 dias (configurÃ¡vel)
âœ… Menu interativo de restauraÃ§Ã£o
âœ… Backup de seguranÃ§a antes de restaurar
âœ… Logs detalhados
âœ… ConfirmaÃ§Ã£o obrigatÃ³ria
âœ… Roda em background (PM2)


ğŸ¯ COMANDOS ÃšTEIS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

pm2 monit                    # Dashboard PM2
pm2 logs backup-postgres     # Logs em tempo real
pm2 restart backup-postgres  # Reiniciar serviÃ§o
./restore.sh                 # Restaurar backup
ls -lt backups/              # Ver backups (mais recente primeiro)


ğŸ“ EXEMPLO DE USO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Dia 1: Instalar e iniciar
./install.sh
cd /root/backup-system
npm run pm2:start

# Sistema faz backup automaticamente a cada 12h

# Dia 5: Algo deu errado, restaurar backup de ontem
./restore.sh
# Escolher backup de 24h atrÃ¡s
# Confirmar com SIM
# Pronto! Banco restaurado


ğŸ‰ PRONTO PARA USAR!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Seu sistema de backup estÃ¡ pronto!
Backups automÃ¡ticos, seguros e fÃ¡ceis de restaurar.

Para mais detalhes, veja: README.md
